metadata={systemName:"jssp.LS.KKB",displayName:"LS jssp KKB",description:"A K2 JSSP Broker KKB",configuration:{ServiceURL:{displayName:"Service URL",type:"string",value:"https://api-in21.leadsquared.com"}}},ondescribe=async function({configuration:e}){postSchema({objects:{order:{displayName:"order",description:"order",properties:{code:{displayName:"code",type:"number",description:"Parameter Value"},result:{displayName:"result",type:"extendedString",description:"Result of call"}},methods:{addActivity:{displayName:"addActivity",type:"create",inputs:["code"],requiredInputs:["code"],parameters:{accessKey:{displayName:"accessKey",type:"string"},secretKey:{displayName:"secretKey",type:"string"},leadId:{displayName:"leadId",type:"string"},getFileUrl:{displayName:"getFileUrl",type:"string"}},requiredParameters:["accessKey","secretKey","leadId","getFileUrl"],outputs:["result"]}}}}})},onexecute=async function({objectName:e,methodName:t,parameters:s,properties:r,configuration:a}){switch(e){case"order":await async function(e,t,s,r){switch(e){case"addActivity":await function(e,t,s){return new Promise((r,a)=>{let i=s.ServiceURL,c=`/ProspectActivity.svc/Retrieve?accessKey=${e.accessKey}&secretKey=${e.secretKey}&leadId=${e.leadId}&getFileUrl=true`,d={Parameter:{ActivityEvent:t.code}},o=new XMLHttpRequest;o.onreadystatechange=function(){try{if(4!==o.readyState)return;if(200!==o.status&&201!==o.status)throw new Error("Failed with status "+o.status);let e=JSON.parse(o.responseText),t=JSON.parse(e.ProspectActivities[0].ActivityFields.mx_Custom_1);postResult({result:t.mx_CustomObject_1}),r()}catch(e){a(e)}},i=i.endsWith("/")?i:i+"/",c=c.startsWith("/")?c.substr(1):c+"/",o.withCredentials=!1,o.open("post",i+c),o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(d))})}(t,s,r);break;default:throw new Error("The method "+e+" is not supported.")}}(t,s,r,a);break;default:throw new Error("The object "+e+" is not supported.")}};
//# sourceMappingURL=index.js.map
